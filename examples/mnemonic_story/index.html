<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PolyBiz AI - Mnemonic Story Generator üé¨</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh; color: #fff; padding: 20px;
            overflow-x: hidden;
        }
        .container { max-width: 900px; margin: 0 auto; }
        
        /* Header */
        .header {
            text-align: center; margin-bottom: 30px;
            padding-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .header h1 { font-size: 1.8em; margin-bottom: 8px; }
        .header h1 .highlight {
            background: linear-gradient(135deg, #f59e0b, #ef4444);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .header p { color: #888; font-size: 0.95em; }
        
        /* Character Search */
        .search-section {
            text-align: center; margin-bottom: 30px;
        }
        .search-box {
            display: inline-flex; align-items: center; gap: 10px;
            background: rgba(255,255,255,0.05); padding: 10px 20px;
            border-radius: 50px; border: 1px solid rgba(255,255,255,0.1);
        }
        .search-input {
            font-size: 2em; width: 80px; background: transparent;
            border: none; color: #fff; text-align: center;
            font-family: 'Noto Sans SC', serif;
        }
        .search-input:focus { outline: none; }
        .search-btn {
            padding: 10px 25px; background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border: none; border-radius: 25px; color: #fff;
            cursor: pointer; font-weight: bold;
        }
        .search-btn:hover { transform: scale(1.05); }
        
        /* Quick Select */
        .quick-chars {
            display: flex; gap: 8px; justify-content: center;
            flex-wrap: wrap; margin-top: 15px;
        }
        .quick-char {
            width: 45px; height: 45px; display: flex; align-items: center;
            justify-content: center; background: rgba(255,255,255,0.05);
            border-radius: 10px; cursor: pointer; font-size: 1.5em;
            font-family: 'Noto Sans SC', serif; transition: all 0.2s;
            border: 1px solid transparent;
        }
        .quick-char:hover { background: rgba(59,130,246,0.3); border-color: #3b82f6; }
        .quick-char.active { background: rgba(245,158,11,0.3); border-color: #f59e0b; }
        
        /* Main Card */
        .card {
            background: rgba(255,255,255,0.03); border-radius: 20px;
            padding: 25px; margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.08);
        }
        
        /* Character Info */
        .char-info {
            display: flex; align-items: center; gap: 25px;
            margin-bottom: 25px; padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .char-display {
            text-align: center; min-width: 120px;
        }
        .char-main {
            font-size: 5em; font-family: 'Noto Sans SC', serif;
            color: #f59e0b; line-height: 1;
            text-shadow: 0 0 30px rgba(245,158,11,0.3);
        }
        .char-pinyin { font-size: 1.3em; color: #60a5fa; margin-top: 5px; }
        .char-meaning { color: #888; }
        .char-details { flex: 1; }
        .char-formula {
            font-size: 1.8em; margin-bottom: 10px;
            font-family: 'Noto Sans SC', serif;
        }
        .char-formula .comp {
            color: #60a5fa; cursor: pointer; padding: 2px 8px;
            border-radius: 5px; transition: all 0.2s;
        }
        .char-formula .comp:hover { background: rgba(96,165,250,0.2); }
        .char-formula .op { color: #666; margin: 0 5px; }
        .char-meta { display: flex; gap: 15px; flex-wrap: wrap; }
        .meta-tag {
            padding: 5px 12px; background: rgba(255,255,255,0.05);
            border-radius: 15px; font-size: 0.85em; color: #aaa;
        }
        
        /* Storyboard */
        .storyboard-section { margin-bottom: 25px; }
        .section-title {
            font-size: 1.1em; margin-bottom: 15px;
            display: flex; align-items: center; gap: 10px;
        }
        
        /* Storyboard Player */
        .storyboard-player {
            background: rgba(0,0,0,0.3); border-radius: 15px;
            overflow: hidden; position: relative;
        }
        .frame-display {
            min-height: 300px; padding: 30px;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            text-align: center; position: relative;
        }
        .frame-number {
            position: absolute; top: 15px; left: 15px;
            padding: 5px 12px; background: rgba(245,158,11,0.3);
            border-radius: 20px; font-size: 0.85em; color: #fbbf24;
        }
        .frame-time {
            position: absolute; top: 15px; right: 15px;
            padding: 5px 12px; background: rgba(255,255,255,0.1);
            border-radius: 20px; font-size: 0.85em; color: #888;
        }
        .frame-emoji {
            font-size: 4em; margin-bottom: 15px;
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .frame-title {
            font-size: 1.5em; margin-bottom: 10px;
            color: #f59e0b;
        }
        .frame-desc {
            font-size: 1.1em; line-height: 1.6;
            max-width: 500px; color: #ccc;
        }
        .frame-movement {
            margin-top: 15px; padding: 10px 20px;
            background: rgba(59,130,246,0.15);
            border-radius: 10px; color: #60a5fa;
            font-size: 0.95em;
        }
        .frame-memory {
            margin-top: 10px; padding: 8px 15px;
            background: rgba(34,197,94,0.15);
            border-radius: 10px; color: #22c55e;
            font-size: 0.9em;
        }
        
        /* Player Controls */
        .player-controls {
            display: flex; align-items: center; gap: 15px;
            padding: 15px 20px; background: rgba(0,0,0,0.2);
            border-top: 1px solid rgba(255,255,255,0.05);
        }
        .play-btn {
            width: 50px; height: 50px; border-radius: 50%;
            background: linear-gradient(135deg, #f59e0b, #ef4444);
            border: none; color: #fff; font-size: 1.3em;
            cursor: pointer; display: flex; align-items: center;
            justify-content: center; transition: all 0.2s;
        }
        .play-btn:hover { transform: scale(1.1); }
        .progress-bar {
            flex: 1; height: 6px; background: rgba(255,255,255,0.1);
            border-radius: 3px; overflow: hidden; cursor: pointer;
        }
        .progress-fill {
            height: 100%; background: linear-gradient(90deg, #f59e0b, #ef4444);
            width: 0%; transition: width 0.3s;
        }
        .frame-dots {
            display: flex; gap: 8px;
        }
        .frame-dot {
            width: 10px; height: 10px; border-radius: 50%;
            background: rgba(255,255,255,0.2); cursor: pointer;
            transition: all 0.2s;
        }
        .frame-dot.active { background: #f59e0b; transform: scale(1.2); }
        .frame-dot:hover { background: rgba(245,158,11,0.5); }
        
        /* Key Phrase */
        .key-phrase {
            text-align: center; padding: 25px;
            background: linear-gradient(135deg, rgba(245,158,11,0.1), rgba(239,68,68,0.1));
            border-radius: 15px; margin-bottom: 20px;
            border: 1px solid rgba(245,158,11,0.2);
        }
        .key-phrase-label { color: #888; font-size: 0.9em; margin-bottom: 10px; }
        .key-phrase-text {
            font-size: 1.5em; color: #fbbf24;
            font-family: 'Noto Sans SC', serif;
        }
        .key-phrase-alt {
            margin-top: 10px; color: #aaa; font-size: 0.95em;
        }
        
        /* Components Grid */
        .components-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px; margin-bottom: 20px;
        }
        .component-item {
            text-align: center; padding: 15px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px; cursor: pointer;
            transition: all 0.2s; border: 1px solid transparent;
        }
        .component-item:hover {
            border-color: rgba(96,165,250,0.3);
            background: rgba(96,165,250,0.1);
        }
        .component-char {
            font-size: 2.5em; font-family: 'Noto Sans SC', serif;
            color: #60a5fa;
        }
        .component-pinyin { color: #fbbf24; font-size: 0.9em; margin-top: 5px; }
        .component-meaning { color: #888; font-size: 0.8em; }
        
        /* Actions */
        .actions {
            display: flex; gap: 10px; justify-content: center;
            flex-wrap: wrap; margin-top: 20px;
        }
        .btn {
            padding: 12px 25px; border: none; border-radius: 25px;
            cursor: pointer; font-size: 0.95em; transition: all 0.2s;
            display: flex; align-items: center; gap: 8px;
        }
        .btn:hover { transform: translateY(-2px); }
        .btn-primary { background: linear-gradient(135deg, #3b82f6, #8b5cf6); color: #fff; }
        .btn-success { background: linear-gradient(135deg, #22c55e, #14b8a6); color: #fff; }
        .btn-warning { background: linear-gradient(135deg, #f59e0b, #ef4444); color: #fff; }
        .btn-secondary { background: rgba(255,255,255,0.1); color: #aaa; }
        
        /* Saved Collection */
        .collection-section { margin-top: 30px; }
        .collection-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
        }
        .collection-item {
            aspect-ratio: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            background: rgba(255,255,255,0.03); border-radius: 12px;
            cursor: pointer; transition: all 0.2s;
            border: 1px solid transparent; position: relative;
        }
        .collection-item:hover {
            border-color: rgba(245,158,11,0.3);
            background: rgba(245,158,11,0.1);
        }
        .collection-char {
            font-size: 2em; font-family: 'Noto Sans SC', serif;
        }
        .collection-delete {
            position: absolute; top: 5px; right: 5px;
            width: 20px; height: 20px; border-radius: 50%;
            background: rgba(239,68,68,0.8); color: #fff;
            border: none; cursor: pointer; font-size: 12px;
            display: none; align-items: center; justify-content: center;
        }
        .collection-item:hover .collection-delete { display: flex; }
        .empty-collection {
            text-align: center; padding: 40px; color: #666;
        }
        
        /* AI Integration Placeholder */
        .ai-section {
            background: linear-gradient(135deg, rgba(139,92,246,0.1), rgba(59,130,246,0.1));
            border-radius: 15px; padding: 25px; text-align: center;
            border: 1px dashed rgba(139,92,246,0.3);
        }
        .ai-icon { font-size: 3em; margin-bottom: 15px; }
        .ai-title { font-size: 1.2em; margin-bottom: 10px; color: #a78bfa; }
        .ai-desc { color: #888; font-size: 0.9em; line-height: 1.6; }
        .ai-services {
            display: flex; gap: 15px; justify-content: center;
            margin-top: 20px; flex-wrap: wrap;
        }
        .ai-service {
            padding: 10px 20px; background: rgba(255,255,255,0.05);
            border-radius: 10px; font-size: 0.9em; color: #aaa;
        }
        
        /* Responsive */
        @media (max-width: 600px) {
            .char-info { flex-direction: column; text-align: center; }
            .char-main { font-size: 4em; }
            .frame-display { min-height: 250px; padding: 20px; }
            .frame-emoji { font-size: 3em; }
            .frame-title { font-size: 1.2em; }
            .frame-desc { font-size: 1em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üé¨ Mnemonic <span class="highlight">Story Generator</span></h1>
            <p>Storyboard GIF trong ƒë·∫ßu - Ghi nh·ªõ H√°n t·ª± b·∫±ng h√¨nh ·∫£nh ƒë·ªông</p>
        </div>
        
        <!-- Search -->
        <div class="search-section">
            <div class="search-box">
                <input type="text" class="search-input" id="search-input" 
                       placeholder="ËÅΩ" maxlength="1" value="ËÅΩ">
                <button class="search-btn" onclick="loadCharacter()">üîç T√¨m</button>
            </div>
            <div class="quick-chars" id="quick-chars"></div>
        </div>
        
        <!-- Main Content -->
        <div class="card" id="main-content">
            <!-- Character Info -->
            <div class="char-info">
                <div class="char-display">
                    <div class="char-main" id="char-main">ËÅΩ</div>
                    <div class="char-pinyin" id="char-pinyin">tƒ´ng</div>
                    <div class="char-meaning" id="char-meaning">L·∫Øng nghe</div>
                </div>
                <div class="char-details">
                    <div class="char-formula" id="char-formula">
                        <span class="comp">ËÄ≥</span><span class="op">+</span>
                        <span class="comp">ÁõÆ</span><span class="op">+</span>
                        <span class="comp">ÂøÉ</span><span class="op">+</span>
                        <span class="comp">ÂçÅ</span><span class="op">+</span>
                        <span class="comp">Áéã</span>
                    </div>
                    <div class="char-meta">
                        <span class="meta-tag">22 n√©t</span>
                        <span class="meta-tag">HSK 3</span>
                        <span class="meta-tag">B·ªô: ËÄ≥ (nhƒ©)</span>
                    </div>
                </div>
            </div>
            
            <!-- Storyboard Player -->
            <div class="storyboard-section">
                <div class="section-title">üé¨ Storyboard Animation</div>
                <div class="storyboard-player">
                    <div class="frame-display" id="frame-display">
                        <!-- Frame content rendered by JS -->
                    </div>
                    <div class="player-controls">
                        <button class="play-btn" id="play-btn" onclick="togglePlay()">‚ñ∂</button>
                        <div class="progress-bar" onclick="seekProgress(event)">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="frame-dots" id="frame-dots"></div>
                    </div>
                </div>
            </div>
            
            <!-- Key Phrase -->
            <div class="key-phrase">
                <div class="key-phrase-label">üß† C√¢u kh√≥a k√≠ch ho·∫°t GIF</div>
                <div class="key-phrase-text" id="key-phrase">"Tai ‚Äì M·∫Øt ‚Äì Tim ‚Äì Tr·ªçn ‚Äì Ch√≠nh"</div>
                <div class="key-phrase-alt" id="key-phrase-alt">Ho·∫∑c: "Nghe b·∫±ng c·∫£ con ng∆∞·ªùi."</div>
            </div>
            
            <!-- Components -->
            <div class="section-title">üß© Th√†nh ph·∫ßn c·∫•u t·∫°o</div>
            <div class="components-grid" id="components-grid"></div>
            
            <!-- Actions -->
            <div class="actions">
                <button class="btn btn-success" onclick="saveToCollection()">‚≠ê L∆∞u v√†o b·ªô s∆∞u t·∫≠p</button>
                <button class="btn btn-primary" onclick="speakChar()">üîä Ph√°t √¢m</button>
                <button class="btn btn-secondary" onclick="shareStory()">üì§ Chia s·∫ª</button>
            </div>
        </div>
        
        <!-- AI Integration (Placeholder) -->
        <div class="card ai-section">
            <div class="ai-icon">ü§ñ</div>
            <div class="ai-title">T·∫°o Mnemonic GIF v·ªõi AI</div>
            <div class="ai-desc">
                S·∫Øp ra m·∫Øt: K·∫øt n·ªëi v·ªõi c√°c d·ªãch v·ª• AI ƒë·ªÉ t·ª± ƒë·ªông t·∫°o h√¨nh ·∫£nh mnemonic theo phong c√°ch ri√™ng c·ªßa b·∫°n!
            </div>
            <div class="ai-services">
                <span class="ai-service">üé® DALL-E 3</span>
                <span class="ai-service">üñºÔ∏è Midjourney</span>
                <span class="ai-service">üé¨ Runway</span>
                <span class="ai-service">‚ú® Stable Diffusion</span>
            </div>
        </div>
        
        <!-- Saved Collection -->
        <div class="card collection-section">
            <div class="section-title">‚≠ê B·ªô s∆∞u t·∫≠p c·ªßa b·∫°n</div>
            <div class="collection-grid" id="collection-grid">
                <div class="empty-collection">Ch∆∞a c√≥ ch·ªØ n√†o ƒë∆∞·ª£c l∆∞u</div>
            </div>
        </div>
    </div>

    <script>

        // ============ DATA ============
        const MNEMONIC_DATA = {
            'ËÅΩ': {
                pinyin: 'tƒ´ng', meaning: 'L·∫Øng nghe', strokes: 22, hsk: 3,
                radical: 'ËÄ≥', radicalName: 'Nhƒ© (tai)',
                components: [
                    { char: 'ËÄ≥', pinyin: 'ƒõr', meaning: 'Tai' },
                    { char: 'ÁõÆ', pinyin: 'm√π', meaning: 'M·∫Øt' },
                    { char: 'ÂøÉ', pinyin: 'xƒ´n', meaning: 'Tim/T√¢m' },
                    { char: 'ÂçÅ', pinyin: 'sh√≠', meaning: 'M∆∞·ªùi/Tr·ªçn v·∫πn' },
                    { char: 'Áéã', pinyin: 'w√°ng', meaning: 'Vua/Ch√≠nh tr·ª±c' }
                ],
                keyPhrase: '"Tai ‚Äì M·∫Øt ‚Äì Tim ‚Äì Tr·ªçn ‚Äì Ch√≠nh"',
                keyPhraseAlt: 'Ho·∫∑c: "Nghe b·∫±ng c·∫£ con ng∆∞·ªùi."',
                frames: [
                    {
                        title: 'B·ªêI C·∫¢NH',
                        emoji: 'üèõÔ∏è',
                        desc: 'M·ªôt ƒë·∫°i s·∫£nh x·ª≠ √°n c·ªï ƒë·∫°i. √Ånh s√°ng v√†ng, kh√¥ng kh√≠ trang nghi√™m. M·ªôt v·ªã quan ng·ªìi sau √°n th∆∞.',
                        movement: 'üìå N√£o ghi: b·ªëi c·∫£nh "thinh ƒë∆∞·ªùng / x√©t x·ª≠"',
                        memory: null,
                        duration: 0.5
                    },
                    {
                        title: 'TAI (ËÄ≥)',
                        emoji: 'üëÇ',
                        desc: 'Quan nghi√™ng ƒë·∫ßu, ƒë∆∞a tay l√™n tai. √Çm thanh xung quanh nh·∫π d·∫ßn, ch·ªâ c√≤n gi·ªçng ng∆∞·ªùi ƒëang n√≥i.',
                        movement: 'üéß Chuy·ªÉn ƒë·ªông: tay ‚Üí tai',
                        memory: 'üß† Ghi nh·ªõ: ËÅΩ b·∫Øt ƒë·∫ßu t·ª´ TAI',
                        duration: 1
                    },
                    {
                        title: 'M·∫ÆT (ÁõÆ)',
                        emoji: 'üëÄ',
                        desc: 'Camera zoom nh·∫π v√†o m·∫Øt quan. √Ånh m·∫Øt s·∫Øc b√©n, nh√¨n th·∫≥ng ng∆∞·ªùi ƒë·ªëi di·ªán. √îng quan s√°t n√©t m·∫∑t ‚Äì c·ª≠ ch·ªâ ‚Äì √°nh m·∫Øt.',
                        movement: 'üëÄ Chuy·ªÉn ƒë·ªông: m·∫Øt s√°ng l√™n',
                        memory: 'üß† Ghi nh·ªõ: nghe m√† ph·∫£i NH√åN',
                        duration: 1
                    },
                    {
                        title: 'TIM (ÂøÉ)',
                        emoji: '‚ù§Ô∏è',
                        desc: 'Quan ƒë·∫∑t tay l√™n ng·ª±c. M·ªôt nh·ªãp tim ph√°t s√°ng nh·∫π, ƒë·ªÅu v√† ch·∫≠m. Khu√¥n m·∫∑t tr·∫ßm tƒ©nh, suy x√©t.',
                        movement: '‚ù§Ô∏è Chuy·ªÉn ƒë·ªông: √°nh s√°ng nh·ªãp tim',
                        memory: 'üß† Ghi nh·ªõ: nghe b·∫±ng T√ÇM',
                        duration: 1
                    },
                    {
                        title: 'TO√ÄN T√ÇM (ÂçÅ)',
                        emoji: 'üîü',
                        desc: 'M·ªçi th·ª© xung quanh im l·∫∑ng ho√†n to√†n. Quan t·∫≠p trung tuy·ªát ƒë·ªëi, kh√¥ng ph√¢n t√¢m.',
                        movement: 'üîü C·∫£m gi√°c: 100% ch√∫ √Ω',
                        memory: 'üß† Ghi nh·ªõ: nghe tr·ªçn v·∫πn',
                        duration: 0.5
                    },
                    {
                        title: 'T√îN TR·ªåNG / CH√çNH DANH (Áéã)',
                        emoji: 'üëë',
                        desc: 'Quan ng·ªìi th·∫≥ng, phong th√°i v∆∞∆°ng gi·∫£ ‚Äì ch√≠nh tr·ª±c. √îng g·∫≠t ƒë·∫ßu, ƒë∆∞a ra ph√°n quy·∫øt c√¥ng b·∫±ng.',
                        movement: 'üëë Chuy·ªÉn ƒë·ªông: t∆∞ th·∫ø uy nghi',
                        memory: 'üß† Ghi nh·ªõ: nghe nh∆∞ nghe vua ‚Äì nghe ƒë·ªÉ x√©t',
                        duration: 1
                    },
                    {
                        title: 'K·∫æT TH√öC GIF',
                        emoji: '‚ú®',
                        desc: 'T·∫•t c·∫£ g·ªôp l·∫°i trong 1 kho·∫£nh kh·∫Øc:\nüëâ Tai m·ªü ‚Äì m·∫Øt nh√¨n ‚Äì tim hi·ªÉu ‚Äì to√†n t√¢m ‚Äì ch√≠nh tr·ª±c\n\nN√£o t·ª± b·∫≠t ra m·ªôt ch·ªØ duy nh·∫•t: ËÅΩ = l·∫Øng nghe ƒë√∫ng nghƒ©a',
                        movement: null,
                        memory: 'üéØ ËÅΩ = L·∫Øng nghe b·∫±ng c·∫£ con ng∆∞·ªùi',
                        duration: 0.5
                    }
                ]
            },
            'ÊÉ≥': {
                pinyin: 'xi«éng', meaning: 'Nghƒ©, mu·ªën', strokes: 13, hsk: 2,
                radical: 'ÂøÉ', radicalName: 'T√¢m (tim)',
                components: [
                    { char: 'Áõ∏', pinyin: 'xiƒÅng', meaning: 'L·∫´n nhau/H√¨nh ·∫£nh' },
                    { char: 'ÂøÉ', pinyin: 'xƒ´n', meaning: 'Tim/T√¢m' }
                ],
                keyPhrase: '"H√¨nh ·∫£nh trong tim = Suy nghƒ©"',
                keyPhraseAlt: 'Ho·∫∑c: "Tim nh√¨n th·∫•y h√¨nh = ƒëang nghƒ©"',
                frames: [
                    {
                        title: 'B·ªêI C·∫¢NH',
                        emoji: 'üåô',
                        desc: 'ƒê√™m khuya, m·ªôt ng∆∞·ªùi ng·ªìi b√™n c·ª≠a s·ªï nh√¨n trƒÉng. Kh√¥ng gian y√™n tƒ©nh.',
                        movement: 'üìå N√£o ghi: kho·∫£nh kh·∫Øc suy t∆∞',
                        memory: null,
                        duration: 0.5
                    },
                    {
                        title: 'H√åNH ·∫¢NH (Áõ∏)',
                        emoji: 'üñºÔ∏è',
                        desc: 'Trong ƒë·∫ßu ng∆∞·ªùi ƒë√≥ hi·ªán l√™n h√¨nh ·∫£nh ai ƒë√≥ - c√≥ th·ªÉ l√† ng∆∞·ªùi th∆∞∆°ng, qu√™ nh√†, k·ª∑ ni·ªám...',
                        movement: 'üñºÔ∏è Chuy·ªÉn ƒë·ªông: h√¨nh ·∫£nh m·ªù d·∫ßn hi·ªán r√µ',
                        memory: 'üß† Ghi nh·ªõ: Áõ∏ = h√¨nh ·∫£nh/t∆∞·ªõng m·∫°o',
                        duration: 1
                    },
                    {
                        title: 'TR√ÅI TIM (ÂøÉ)',
                        emoji: 'üí≠',
                        desc: 'H√¨nh ·∫£nh ƒë√≥ kh√¥ng ·ªü trong m·∫Øt, m√† ·ªü trong TIM. Tim ƒë·∫≠p nh·∫π, ·∫•m √°p.',
                        movement: '‚ù§Ô∏è Chuy·ªÉn ƒë·ªông: tim ph√°t s√°ng',
                        memory: 'üß† Ghi nh·ªõ: nghƒ© = h√¨nh trong tim',
                        duration: 1
                    },
                    {
                        title: 'K·∫æT TH√öC',
                        emoji: 'üí°',
                        desc: 'H√¨nh ·∫£nh + Tim = Suy nghƒ©\nÊÉ≥ = Khi tim nh√¨n th·∫•y h√¨nh ·∫£nh',
                        movement: null,
                        memory: 'üéØ ÊÉ≥ = H√¨nh ·∫£nh trong tim',
                        duration: 0.5
                    }
                ]
            },
            'Â•Ω': {
                pinyin: 'h«éo', meaning: 'T·ªët, th√≠ch', strokes: 6, hsk: 1,
                radical: 'Â•≥', radicalName: 'N·ªØ',
                components: [
                    { char: 'Â•≥', pinyin: 'n«ö', meaning: 'N·ªØ/M·∫π' },
                    { char: 'Â≠ê', pinyin: 'z«ê', meaning: 'Con' }
                ],
                keyPhrase: '"M·∫π √¥m con = ƒêi·ªÅu t·ªët ƒë·∫πp nh·∫•t"',
                keyPhraseAlt: 'Ho·∫∑c: "N·ªØ + Con = T·ªët"',
                frames: [
                    {
                        title: 'B·ªêI C·∫¢NH',
                        emoji: 'üè†',
                        desc: 'M·ªôt cƒÉn nh√† ·∫•m c√∫ng, √°nh n·∫Øng chi·ªÅu xuy√™n qua c·ª≠a s·ªï.',
                        movement: 'üìå N√£o ghi: kh√¥ng gian gia ƒë√¨nh',
                        memory: null,
                        duration: 0.5
                    },
                    {
                        title: 'NG∆Ø·ªúI M·∫∏ (Â•≥)',
                        emoji: 'üë©',
                        desc: 'Ng∆∞·ªùi m·∫π ng·ªìi ƒë√≥, d·ªãu d√†ng, y√™u th∆∞∆°ng. C√¥ ·∫•y m·ªü r·ªông v√≤ng tay.',
                        movement: 'üë© Chuy·ªÉn ƒë·ªông: v√≤ng tay m·ªü ra',
                        memory: 'üß† Ghi nh·ªõ: Â•≥ = n·ªØ/m·∫π',
                        duration: 1
                    },
                    {
                        title: 'ƒê·ª®A CON (Â≠ê)',
                        emoji: 'üë∂',
                        desc: 'ƒê·ª©a con ch·∫°y ƒë·∫øn, nh·∫£y v√†o l√≤ng m·∫π. Ti·∫øng c∆∞·ªùi vang l√™n.',
                        movement: 'üë∂ Chuy·ªÉn ƒë·ªông: con ch·∫°y ƒë·∫øn',
                        memory: 'üß† Ghi nh·ªõ: Â≠ê = con',
                        duration: 1
                    },
                    {
                        title: 'K·∫æT TH√öC',
                        emoji: 'ü•∞',
                        desc: 'M·∫π √¥m con, c·∫£ hai c∆∞·ªùi h·∫°nh ph√∫c.\nƒê√¢y l√† ƒëi·ªÅu T·ªêT ƒê·∫∏P nh·∫•t tr√™n ƒë·ªùi!',
                        movement: 'üíï Chuy·ªÉn ƒë·ªông: tr√°i tim bay l√™n',
                        memory: 'üéØ Â•Ω = M·∫π + Con = T·ªët ƒë·∫πp',
                        duration: 0.5
                    }
                ]
            },
            'Êòé': {
                pinyin: 'm√≠ng', meaning: 'S√°ng, r√µ r√†ng', strokes: 8, hsk: 2,
                radical: 'Êó•', radicalName: 'Nh·∫≠t (m·∫∑t tr·ªùi)',
                components: [
                    { char: 'Êó•', pinyin: 'r√¨', meaning: 'M·∫∑t tr·ªùi' },
                    { char: 'Êúà', pinyin: 'yu√®', meaning: 'M·∫∑t trƒÉng' }
                ],
                keyPhrase: '"M·∫∑t tr·ªùi + M·∫∑t trƒÉng = S√°ng"',
                keyPhraseAlt: 'Ho·∫∑c: "Ng√†y ƒë√™m ƒë·ªÅu s√°ng"',
                frames: [
                    {
                        title: 'B·ªêI C·∫¢NH',
                        emoji: 'üåÖ',
                        desc: 'B·∫ßu tr·ªùi r·ªông l·ªõn, ƒë∆∞·ªùng ch√¢n tr·ªùi xa xa.',
                        movement: 'üìå N√£o ghi: kh√¥ng gian v≈© tr·ª•',
                        memory: null,
                        duration: 0.5
                    },
                    {
                        title: 'M·∫∂T TR·ªúI (Êó•)',
                        emoji: '‚òÄÔ∏è',
                        desc: 'M·∫∑t tr·ªùi m·ªçc l√™n, t·ªèa √°nh s√°ng v√†ng r·ª±c r·ª°. Ban ng√†y s√°ng.',
                        movement: '‚òÄÔ∏è Chuy·ªÉn ƒë·ªông: m·∫∑t tr·ªùi m·ªçc',
                        memory: 'üß† Ghi nh·ªõ: Êó• = m·∫∑t tr·ªùi = s√°ng ban ng√†y',
                        duration: 1
                    },
                    {
                        title: 'M·∫∂T TRƒÇNG (Êúà)',
                        emoji: 'üåô',
                        desc: 'M·∫∑t trƒÉng xu·∫•t hi·ªán, √°nh s√°ng b·∫°c d·ªãu d√†ng. Ban ƒë√™m c≈©ng s√°ng.',
                        movement: 'üåô Chuy·ªÉn ƒë·ªông: m·∫∑t trƒÉng l√™n',
                        memory: 'üß† Ghi nh·ªõ: Êúà = m·∫∑t trƒÉng = s√°ng ban ƒë√™m',
                        duration: 1
                    },
                    {
                        title: 'K·∫æT TH√öC',
                        emoji: '‚ú®',
                        desc: 'C·∫£ m·∫∑t tr·ªùi v√† m·∫∑t trƒÉng c√πng chi·∫øu s√°ng.\nNg√†y ƒë√™m ƒë·ªÅu s√°ng = R·∫§T S√ÅNG!',
                        movement: '‚ú® Chuy·ªÉn ƒë·ªông: √°nh s√°ng t·ªèa ra',
                        memory: 'üéØ Êòé = M·∫∑t tr·ªùi + M·∫∑t trƒÉng = S√°ng r√µ',
                        duration: 0.5
                    }
                ]
            },
            '‰ºë': {
                pinyin: 'xi≈´', meaning: 'Ngh·ªâ ng∆°i', strokes: 6, hsk: 2,
                radical: '‰∫ª', radicalName: 'Nh√¢n (ng∆∞·ªùi)',
                components: [
                    { char: '‰∫ª', pinyin: 'r√©n', meaning: 'Ng∆∞·ªùi' },
                    { char: 'Êú®', pinyin: 'm√π', meaning: 'C√¢y' }
                ],
                keyPhrase: '"Ng∆∞·ªùi t·ª±a c√¢y = Ngh·ªâ ng∆°i"',
                keyPhraseAlt: 'Ho·∫∑c: "D∆∞·ªõi b√≥ng c√¢y, ng∆∞·ªùi ngh·ªâ"',
                frames: [
                    {
                        title: 'B·ªêI C·∫¢NH',
                        emoji: 'üå≥',
                        desc: 'M·ªôt c√°nh ƒë·ªìng xanh, c√≥ c√¢y c·ªï th·ª• l·ªõn t·ªèa b√≥ng m√°t.',
                        movement: 'üìå N√£o ghi: thi√™n nhi√™n y√™n b√¨nh',
                        memory: null,
                        duration: 0.5
                    },
                    {
                        title: 'C√ÇY (Êú®)',
                        emoji: 'üå≤',
                        desc: 'C√¢y ƒë·ª©ng v·ªØng ch√£i, t√°n l√° xanh t∆∞∆°i, b√≥ng m√°t r·ª£p ƒë·∫•t.',
                        movement: 'üå≤ Chuy·ªÉn ƒë·ªông: l√° c√¢y lay nh·∫π',
                        memory: 'üß† Ghi nh·ªõ: Êú® = c√¢y',
                        duration: 1
                    },
                    {
                        title: 'NG∆Ø·ªúI (‰∫ª)',
                        emoji: 'üö∂',
                        desc: 'M·ªôt ng∆∞·ªùi ƒëi l√†m v·ªÅ, m·ªát m·ªèi. Anh ta ƒë·∫øn b√™n c√¢y, t·ª±a l∆∞ng v√†o th√¢n c√¢y.',
                        movement: 'üö∂ Chuy·ªÉn ƒë·ªông: ng∆∞·ªùi t·ª±a v√†o c√¢y',
                        memory: 'üß† Ghi nh·ªõ: ‰∫ª = ng∆∞·ªùi',
                        duration: 1
                    },
                    {
                        title: 'K·∫æT TH√öC',
                        emoji: 'üòå',
                        desc: 'Ng∆∞·ªùi nh·∫Øm m·∫Øt, th·ªü nh·∫π, ngh·ªâ ng∆°i d∆∞·ªõi b√≥ng c√¢y.\nNg∆∞·ªùi + C√¢y = NGH·ªà NG∆†I',
                        movement: 'üí§ Chuy·ªÉn ƒë·ªông: zzz bay l√™n',
                        memory: 'üéØ ‰ºë = Ng∆∞·ªùi t·ª±a c√¢y = Ngh·ªâ',
                        duration: 0.5
                    }
                ]
            }
        };
        
        const QUICK_CHARS = ['ËÅΩ', 'ÊÉ≥', 'Â•Ω', 'Êòé', '‰ºë'];
        
        // ============ STATE ============
        let currentChar = 'ËÅΩ';
        let currentFrame = 0;
        let isPlaying = false;
        let playInterval = null;
        let collection = JSON.parse(localStorage.getItem('mnemonic_collection') || '[]');
        
        // ============ FUNCTIONS ============
        function loadCharacter(char) {
            if (!char) char = document.getElementById('search-input').value.trim();
            if (!char) return;
            
            currentChar = char;
            currentFrame = 0;
            stopPlay();
            
            document.getElementById('search-input').value = char;
            
            // Update quick chars
            document.querySelectorAll('.quick-char').forEach(el => {
                el.classList.toggle('active', el.textContent === char);
            });
            
            const data = MNEMONIC_DATA[char];
            if (!data) {
                document.getElementById('main-content').innerHTML = `
                    <div style="text-align:center;padding:50px;">
                        <div style="font-size:4em;margin-bottom:20px;">${char}</div>
                        <p style="color:#888;">Ch∆∞a c√≥ d·ªØ li·ªáu mnemonic cho ch·ªØ n√†y.</p>
                        <p style="color:#666;font-size:0.9em;margin-top:10px;">
                            H√£y th·ª≠: ${QUICK_CHARS.join(', ')}
                        </p>
                    </div>
                `;
                return;
            }
            
            // Update UI
            document.getElementById('char-main').textContent = char;
            document.getElementById('char-pinyin').textContent = data.pinyin;
            document.getElementById('char-meaning').textContent = data.meaning;
            
            // Formula
            const formula = data.components.map(c => 
                `<span class="comp" onclick="loadCharacter('${c.char}')">${c.char}</span>`
            ).join('<span class="op">+</span>');
            document.getElementById('char-formula').innerHTML = formula;
            
            // Key phrase
            document.getElementById('key-phrase').textContent = data.keyPhrase;
            document.getElementById('key-phrase-alt').textContent = data.keyPhraseAlt;
            
            // Components
            document.getElementById('components-grid').innerHTML = data.components.map(c => `
                <div class="component-item" onclick="loadCharacter('${c.char}')">
                    <div class="component-char">${c.char}</div>
                    <div class="component-pinyin">${c.pinyin}</div>
                    <div class="component-meaning">${c.meaning}</div>
                </div>
            `).join('');
            
            // Frame dots
            document.getElementById('frame-dots').innerHTML = data.frames.map((_, i) => 
                `<div class="frame-dot ${i === 0 ? 'active' : ''}" onclick="goToFrame(${i})"></div>`
            ).join('');
            
            renderFrame();
        }
        
        function renderFrame() {
            const data = MNEMONIC_DATA[currentChar];
            if (!data) return;
            
            const frame = data.frames[currentFrame];
            const totalFrames = data.frames.length;
            
            document.getElementById('frame-display').innerHTML = `
                <div class="frame-number">Frame ${currentFrame}/${totalFrames - 1}</div>
                <div class="frame-time">${frame.duration}s</div>
                <div class="frame-emoji">${frame.emoji}</div>
                <div class="frame-title">${frame.title}</div>
                <div class="frame-desc">${frame.desc.replace(/\n/g, '<br>')}</div>
                ${frame.movement ? `<div class="frame-movement">${frame.movement}</div>` : ''}
                ${frame.memory ? `<div class="frame-memory">${frame.memory}</div>` : ''}
            `;
            
            // Update progress
            const progress = ((currentFrame + 1) / totalFrames) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            
            // Update dots
            document.querySelectorAll('.frame-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === currentFrame);
            });
        }
        
        function togglePlay() {
            if (isPlaying) {
                stopPlay();
            } else {
                startPlay();
            }
        }
        
        function startPlay() {
            const data = MNEMONIC_DATA[currentChar];
            if (!data) return;
            
            isPlaying = true;
            document.getElementById('play-btn').textContent = '‚è∏';
            
            function playNextFrame() {
                const frame = data.frames[currentFrame];
                const duration = frame.duration * 1000;
                
                playInterval = setTimeout(() => {
                    currentFrame++;
                    if (currentFrame >= data.frames.length) {
                        currentFrame = 0;
                        stopPlay();
                    } else {
                        renderFrame();
                        if (isPlaying) playNextFrame();
                    }
                }, duration);
            }
            
            playNextFrame();
        }
        
        function stopPlay() {
            isPlaying = false;
            document.getElementById('play-btn').textContent = '‚ñ∂';
            if (playInterval) {
                clearTimeout(playInterval);
                playInterval = null;
            }
        }
        
        function goToFrame(index) {
            stopPlay();
            currentFrame = index;
            renderFrame();
        }
        
        function seekProgress(event) {
            const data = MNEMONIC_DATA[currentChar];
            if (!data) return;
            
            const rect = event.target.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const percent = x / rect.width;
            const frameIndex = Math.floor(percent * data.frames.length);
            
            goToFrame(Math.min(frameIndex, data.frames.length - 1));
        }
        
        function speakChar() {
            const utterance = new SpeechSynthesisUtterance(currentChar);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.7;
            speechSynthesis.speak(utterance);
        }
        
        function saveToCollection() {
            if (!collection.includes(currentChar)) {
                collection.push(currentChar);
                localStorage.setItem('mnemonic_collection', JSON.stringify(collection));
                renderCollection();
                alert(`ƒê√£ l∆∞u "${currentChar}" v√†o b·ªô s∆∞u t·∫≠p!`);
            } else {
                alert(`"${currentChar}" ƒë√£ c√≥ trong b·ªô s∆∞u t·∫≠p!`);
            }
        }
        
        function removeFromCollection(char) {
            collection = collection.filter(c => c !== char);
            localStorage.setItem('mnemonic_collection', JSON.stringify(collection));
            renderCollection();
        }
        
        function renderCollection() {
            const grid = document.getElementById('collection-grid');
            if (collection.length === 0) {
                grid.innerHTML = '<div class="empty-collection">Ch∆∞a c√≥ ch·ªØ n√†o ƒë∆∞·ª£c l∆∞u</div>';
                return;
            }
            
            grid.innerHTML = collection.map(char => `
                <div class="collection-item" onclick="loadCharacter('${char}')">
                    <div class="collection-char">${char}</div>
                    <button class="collection-delete" onclick="event.stopPropagation(); removeFromCollection('${char}')">√ó</button>
                </div>
            `).join('');
        }
        
        function shareStory() {
            const data = MNEMONIC_DATA[currentChar];
            if (!data) return;
            
            const text = `üé¨ Mnemonic cho ch·ªØ ${currentChar} (${data.pinyin})\n\n` +
                `${data.keyPhrase}\n\n` +
                `H·ªçc ti·∫øng Trung v·ªõi PolyBiz AI!`;
            
            if (navigator.share) {
                navigator.share({ title: `Mnemonic: ${currentChar}`, text: text });
            } else {
                navigator.clipboard.writeText(text);
                alert('ƒê√£ copy n·ªôi dung v√†o clipboard!');
            }
        }
        
        function renderQuickChars() {
            document.getElementById('quick-chars').innerHTML = QUICK_CHARS.map(char => 
                `<div class="quick-char ${char === currentChar ? 'active' : ''}" 
                      onclick="loadCharacter('${char}')">${char}</div>`
            ).join('');
        }
        
        // ============ INIT ============
        document.getElementById('search-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') loadCharacter();
        });
        
        renderQuickChars();
        renderCollection();
        loadCharacter('ËÅΩ');
    </script>
</body>
</html>

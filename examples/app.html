<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PolyBiz AI - Chinese Learning Platform</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --sidebar-width: 280px;
            --header-height: 60px;
            --bg-dark: #0a0a12;
            --bg-card: rgba(255,255,255,0.03);
            --accent: #60a5fa;
            --accent-glow: rgba(96,165,250,0.4);
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-dark);
            color: #fff;
            overflow: hidden;
            height: 100vh;
        }
        
        /* ============ 3D STAGE BACKGROUND ============ */
        .stage-bg {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: -1;
            perspective: 1000px;
            overflow: hidden;
        }
        
        .stage-floor {
            position: absolute;
            bottom: -50%;
            left: -25%;
            width: 150%;
            height: 100%;
            background: linear-gradient(to top, 
                rgba(59,130,246,0.1) 0%,
                transparent 50%
            );
            transform: rotateX(60deg);
            transform-origin: center bottom;
        }
        
        .stage-grid {
            position: absolute;
            bottom: 0;
            left: -25%;
            width: 150%;
            height: 60%;
            background-image: 
                linear-gradient(rgba(59,130,246,0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(59,130,246,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            transform: rotateX(60deg);
            transform-origin: center bottom;
            animation: gridMove 20s linear infinite;
        }
        
        @keyframes gridMove {
            0% { background-position: 0 0; }
            100% { background-position: 0 50px; }
        }
        
        .spotlight {
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.3;
            animation: spotlightPulse 4s ease-in-out infinite;
        }
        
        .spotlight-1 {
            top: 10%;
            left: 20%;
            background: #3b82f6;
        }
        
        .spotlight-2 {
            top: 30%;
            right: 15%;
            background: #8b5cf6;
            animation-delay: 1s;
        }
        
        .spotlight-3 {
            bottom: 20%;
            left: 40%;
            background: #ec4899;
            animation-delay: 2s;
        }
        
        @keyframes spotlightPulse {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 0.4; transform: scale(1.1); }
        }
        
        /* Floating particles */
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            animation: particleFloat 15s linear infinite;
        }
        
        @keyframes particleFloat {
            0% { transform: translateY(100vh) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) translateX(100px); opacity: 0; }
        }

        /* ============ LAYOUT ============ */
        .app-container {
            display: flex;
            height: 100vh;
        }
        
        /* ============ SIDEBAR ============ */
        .sidebar {
            width: var(--sidebar-width);
            height: 100vh;
            background: rgba(10,10,18,0.95);
            border-right: 1px solid rgba(255,255,255,0.05);
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 100;
            backdrop-filter: blur(20px);
        }
        
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            font-size: 2em;
            filter: drop-shadow(0 0 10px var(--accent-glow));
        }
        
        .logo-text {
            font-size: 1.4em;
            font-weight: bold;
        }
        
        .logo-text span { color: var(--accent); }
        
        .sidebar-stats {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            font-size: 0.85em;
        }
        
        .stat-badge.streak { color: #fbbf24; }
        .stat-badge.xp { color: #22c55e; }
        
        /* Navigation */
        .nav-section {
            flex: 1;
            overflow-y: auto;
            padding: 15px 0;
        }
        
        .nav-section::-webkit-scrollbar {
            width: 4px;
        }
        
        .nav-section::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
        }
        
        .nav-category {
            padding: 0 15px;
            margin-bottom: 20px;
        }
        
        .nav-category-title {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 10px;
            color: #888;
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 15px;
            margin: 2px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            color: #aaa;
            font-size: 0.9em;
        }
        
        .nav-item:hover {
            background: rgba(255,255,255,0.05);
            color: #fff;
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(139,92,246,0.2));
            color: #fff;
            border-left: 3px solid var(--accent);
        }
        
        .nav-item-icon {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
        }
        
        .nav-item-badge {
            margin-left: auto;
            padding: 2px 8px;
            background: rgba(34,197,94,0.2);
            color: #22c55e;
            border-radius: 10px;
            font-size: 0.7em;
        }
        
        /* ============ MAIN CONTENT ============ */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        
        /* Header */
        .main-header {
            height: var(--header-height);
            padding: 0 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(10,10,18,0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            z-index: 50;
        }
        
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #888;
        }
        
        .breadcrumb-current {
            color: #fff;
            font-weight: bold;
        }
        
        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        /* Language Switcher */
        .lang-switcher {
            display: flex;
            background: rgba(255,255,255,0.05);
            border-radius: 25px;
            padding: 3px;
            margin-right: 10px;
        }
        
        .lang-btn {
            padding: 8px 14px;
            border: none;
            border-radius: 20px;
            background: transparent;
            color: #888;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .lang-btn:hover {
            color: #fff;
        }
        
        .lang-btn.active {
            background: var(--accent);
            color: #fff;
        }
        
        .btn-icon {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.05);
            color: #888;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.2s;
        }
        
        .btn-icon:hover {
            background: rgba(255,255,255,0.1);
            color: #fff;
        }

        /* ============ STAGE VIEW (3D Content Area) ============ */
        .stage-view {
            flex: 1;
            position: relative;
            perspective: 2000px;
            overflow: hidden;
        }
        
        .stage-container {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            transform-style: preserve-3d;
            transition: transform 0.5s ease-out;
        }
        
        /* Welcome Screen */
        .welcome-screen {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transform-style: preserve-3d;
        }
        
        .welcome-content {
            text-align: center;
            transform: translateZ(100px);
        }
        
        .welcome-title {
            font-size: 3em;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #60a5fa, #a78bfa, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleGlow 3s ease-in-out infinite;
        }
        
        @keyframes titleGlow {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(96,165,250,0.5)); }
            50% { filter: drop-shadow(0 0 40px rgba(168,85,247,0.8)); }
        }
        
        .welcome-subtitle {
            color: #888;
            font-size: 1.2em;
            margin-bottom: 40px;
        }
        
        .welcome-cards {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            max-width: 800px;
        }
        
        .welcome-card {
            width: 180px;
            padding: 25px 20px;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.4s;
            transform-style: preserve-3d;
        }
        
        .welcome-card:hover {
            transform: translateY(-10px) translateZ(30px) rotateX(-5deg);
            background: rgba(255,255,255,0.08);
            border-color: var(--accent);
            box-shadow: 0 20px 60px rgba(59,130,246,0.3);
        }
        
        .welcome-card-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.3));
        }
        
        .welcome-card-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .welcome-card-desc {
            color: #888;
            font-size: 0.8em;
        }
        
        /* Game Frame */
        .game-frame-container {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 30px;
            transform-style: preserve-3d;
        }
        
        .game-frame-container.active {
            display: flex;
        }
        
        .game-frame-wrapper {
            width: 100%;
            max-width: 1200px;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            animation: frameEnter 0.6s ease-out;
        }
        
        @keyframes frameEnter {
            0% {
                opacity: 0;
                transform: translateZ(-200px) rotateX(10deg);
            }
            100% {
                opacity: 1;
                transform: translateZ(0) rotateX(0);
            }
        }
        
        .game-frame {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 20px;
            background: #0f0f1a;
            box-shadow: 
                0 0 0 1px rgba(255,255,255,0.1),
                0 25px 80px rgba(0,0,0,0.5),
                0 0 100px rgba(59,130,246,0.2);
            overflow: auto;
        }
        
        /* Allow iframe content to scroll */
        .game-frame-wrapper {
            overflow: visible;
        }
        
        .game-frame-container {
            overflow: visible;
        }
        
        .game-frame {
            overflow: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Stage curtains effect */
        .curtain {
            position: absolute;
            top: 0;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, 
                rgba(139,0,0,0.9) 0%,
                rgba(100,0,0,0.8) 50%,
                rgba(60,0,0,0.9) 100%
            );
            z-index: 200;
            transition: transform 1s ease-in-out;
        }
        
        .curtain-left {
            left: 0;
            transform-origin: left;
            transform: scaleX(0);
        }
        
        .curtain-right {
            right: 0;
            transform-origin: right;
            transform: scaleX(0);
        }
        
        .curtains-closed .curtain-left,
        .curtains-closed .curtain-right {
            transform: scaleX(1);
        }
        
        /* Loading overlay */
        .loading-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(10,10,18,0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 150;
        }
        
        .loading-overlay.active {
            display: flex;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(255,255,255,0.1);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* ============ RESPONSIVE ============ */
        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.05);
            color: #fff;
            cursor: pointer;
            font-size: 1.3em;
            margin-right: 10px;
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        .sidebar-overlay.show {
            display: block;
        }
        
        .sidebar-close {
            display: none;
            position: absolute;
            top: 15px;
            right: 15px;
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            color: #fff;
            cursor: pointer;
            font-size: 1.2em;
        }
        
        @media (max-width: 900px) {
            .sidebar {
                position: fixed;
                left: -100%;
                z-index: 1000;
                transition: left 0.3s;
                width: 280px;
            }
            
            .sidebar.open {
                left: 0;
            }
            
            .sidebar-close {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .menu-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .main-header {
                padding: 0 15px;
            }
            
            .lang-switcher {
                margin-right: 5px;
            }
            
            .lang-btn {
                padding: 6px 10px;
                font-size: 0.8em;
            }
            
            .breadcrumb {
                display: none;
            }
            
            .welcome-content {
                padding: 0 15px;
            }
            
            .welcome-title {
                font-size: 2em;
            }
            
            .welcome-cards {
                gap: 10px;
            }
            
            .welcome-card {
                width: 140px;
                padding: 15px;
            }
            
            .welcome-card-icon {
                font-size: 2em;
            }
            
            .game-frame-container {
                padding: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .lang-btn {
                padding: 5px 8px;
                font-size: 0.75em;
            }
            
            .welcome-card {
                width: 120px;
                padding: 12px;
            }
            
            .header-actions .btn-icon {
                width: 35px;
                height: 35px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>
    
    <!-- 3D Stage Background -->
    <div class="stage-bg">
        <div class="stage-floor"></div>
        <div class="stage-grid"></div>
        <div class="spotlight spotlight-1"></div>
        <div class="spotlight spotlight-2"></div>
        <div class="spotlight spotlight-3"></div>
        <div class="particles" id="particles"></div>
    </div>
    
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <button class="sidebar-close" onclick="closeSidebar()">‚úï</button>
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üÄÑ</span>
                    <span class="logo-text">Poly<span>Biz</span> AI</span>
                </div>
                <div class="sidebar-stats">
                    <div class="stat-badge streak">üî• <span id="streak">0</span></div>
                    <div class="stat-badge xp">‚≠ê <span id="xp">0</span> XP</div>
                </div>
            </div>
            
            <nav class="nav-section">
                <!-- Home -->
                <div class="nav-category">
                    <div class="nav-item active" data-page="home">
                        <span class="nav-item-icon">üè†</span>
                        <span data-i18n="home">Trang ch·ªß</span>
                    </div>
                    <div class="nav-item" data-page="daily_challenge/index.html">
                        <span class="nav-item-icon">üéØ</span>
                        <span data-i18n="dailyChallenge">Th·ª≠ th√°ch h√¥m nay</span>
                        <span class="nav-item-badge">+50 XP</span>
                    </div>
                </div>
                
                <!-- Writing -->
                <div class="nav-category">
                    <div class="nav-category-title">‚úçÔ∏è <span data-i18n="writing">Vi·∫øt ch·ªØ</span></div>
                    <div class="nav-item" data-page="hanzi_writer_mvp/index.html">
                        <span class="nav-item-icon">‚úçÔ∏è</span>
                        <span data-i18n="hanziWriter">Hanzi Writer</span>
                    </div>
                    <div class="nav-item" data-page="stroke_order/index.html">
                        <span class="nav-item-icon">‚úèÔ∏è</span>
                        <span data-i18n="strokeOrder">Stroke Order Quiz</span>
                    </div>
                    <div class="nav-item" data-page="char_decompose/index.html">
                        <span class="nav-item-icon">üîç</span>
                        <span data-i18n="charDecompose">Character Decomposition</span>
                    </div>
                    <div class="nav-item" data-page="radical_fusion/index.html">
                        <span class="nav-item-icon">ü§≤</span>
                        <span data-i18n="radicalFusion">Radical Fusion</span>
                    </div>
                </div>
                
                <!-- Vocabulary -->
                <div class="nav-category">
                    <div class="nav-category-title">üìö <span data-i18n="vocabulary">T·ª´ v·ª±ng</span></div>
                    <div class="nav-item" data-page="vocab_builder/index.html">
                        <span class="nav-item-icon">üìö</span>
                        <span data-i18n="vocabBuilder">Vocabulary Builder</span>
                    </div>
                    <div class="nav-item" data-page="reading_practice/index.html">
                        <span class="nav-item-icon">üìñ</span>
                        <span data-i18n="readingPractice">Reading Practice</span>
                    </div>
                    <div class="nav-item" data-page="measure_words/index.html">
                        <span class="nav-item-icon">üìè</span>
                        <span data-i18n="measureWords">Measure Words</span>
                    </div>
                    <div class="nav-item" data-page="pinyin_typing/index.html">
                        <span class="nav-item-icon">‚å®Ô∏è</span>
                        <span data-i18n="pinyinTyping">Pinyin Typing</span>
                    </div>
                    <div class="nav-item" data-page="anki_manager/index.html">
                        <span class="nav-item-icon">üÉè</span>
                        <span data-i18n="ankiManager">Anki Manager</span>
                    </div>
                </div>
                
                <!-- Grammar -->
                <div class="nav-category">
                    <div class="nav-category-title">üìù <span data-i18n="grammar">Ng·ªØ ph√°p</span></div>
                    <div class="nav-item" data-page="grammar_drills/index.html">
                        <span class="nav-item-icon">üìù</span>
                        <span data-i18n="grammarDrills">Grammar Drills</span>
                    </div>
                    <div class="nav-item" data-page="sentence_builder/index.html">
                        <span class="nav-item-icon">üß©</span>
                        <span data-i18n="sentenceBuilder">Sentence Builder</span>
                    </div>
                    <div class="nav-item" data-page="hsk_test/index.html">
                        <span class="nav-item-icon">üìã</span>
                        <span data-i18n="hskTest">HSK Test</span>
                    </div>
                </div>
                
                <!-- Listening -->
                <div class="nav-category">
                    <div class="nav-category-title">üëÇ <span data-i18n="listening">Nghe & N√≥i</span></div>
                    <div class="nav-item" data-page="tone_trainer/index.html">
                        <span class="nav-item-icon">üéµ</span>
                        <span data-i18n="toneTrainer">Tone Trainer</span>
                    </div>
                    <div class="nav-item" data-page="listening_quiz/index.html">
                        <span class="nav-item-icon">üëÇ</span>
                        <span data-i18n="listeningQuiz">Listening Quiz</span>
                    </div>
                    <div class="nav-item" data-page="conversation/index.html">
                        <span class="nav-item-icon">üí¨</span>
                        <span data-i18n="conversation">Conversation</span>
                        <span class="nav-item-badge">NEW</span>
                    </div>
                    <div class="nav-item" data-page="face_mimic/index.html">
                        <span class="nav-item-icon">üòÆ</span>
                        <span data-i18n="faceMimic">Face Mimic</span>
                    </div>
                </div>
                
                <!-- Games -->
                <div class="nav-category">
                    <div class="nav-category-title">üéÆ <span data-i18n="games">Mini Games</span></div>
                    <div class="nav-item" data-page="memory_game/index.html">
                        <span class="nav-item-icon">üß†</span>
                        <span data-i18n="memoryGame">Memory Game</span>
                    </div>
                    <div class="nav-item" data-page="scrollytelling/index.html">
                        <span class="nav-item-icon">üìú</span>
                        <span data-i18n="scrollytelling">Scrollytelling</span>
                    </div>
                </div>
                
                <!-- Culture -->
                <div class="nav-category">
                    <div class="nav-category-title">üèÆ <span data-i18n="culture">VƒÉn h√≥a</span></div>
                    <div class="nav-item" data-page="chengyu/index.html">
                        <span class="nav-item-icon">üèÆ</span>
                        <span data-i18n="chengyuGame">Chengyu Game</span>
                        <span class="nav-item-badge">NEW</span>
                    </div>
                    <div class="nav-item" data-page="culture_quiz/index.html">
                        <span class="nav-item-icon">üèØ</span>
                        <span data-i18n="cultureQuiz">Culture Quiz</span>
                        <span class="nav-item-badge">NEW</span>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <div class="breadcrumb">
                    <button class="menu-toggle" onclick="openSidebar()">‚ò∞</button>
                    <span>üè†</span>
                    <span>/</span>
                    <span class="breadcrumb-current" id="current-page">Trang ch·ªß</span>
                </div>
                <div class="header-actions">
                    <div class="lang-switcher">
                        <button class="lang-btn active" data-lang="vi" onclick="setLanguage('vi')">VI</button>
                        <button class="lang-btn" data-lang="zh" onclick="setLanguage('zh')">‰∏≠</button>
                        <button class="lang-btn" data-lang="en" onclick="setLanguage('en')">EN</button>
                    </div>
                    <button class="btn-icon" onclick="toggleFullscreen()">‚õ∂</button>
                    <button class="btn-icon" onclick="refreshGame()">üîÑ</button>
                </div>
            </header>
            
            <div class="stage-view" id="stage-view">
                <div class="stage-container" id="stage-container">
                    <!-- Welcome Screen -->
                    <div class="welcome-screen" id="welcome-screen">
                        <div class="welcome-content">
                            <h1 class="welcome-title">Â≠¶‰∏≠Êñá</h1>
                            <p class="welcome-subtitle">Ch·ªçn m·ªôt ho·∫°t ƒë·ªông ƒë·ªÉ b·∫Øt ƒë·∫ßu h√†nh tr√¨nh</p>
                            
                            <div class="welcome-cards">
                                <div class="welcome-card" onclick="loadPage('daily_challenge/index.html')">
                                    <div class="welcome-card-icon">üéØ</div>
                                    <div class="welcome-card-title">Th·ª≠ th√°ch</div>
                                    <div class="welcome-card-desc">Ho√†n th√†nh m·ª•c ti√™u h√¥m nay</div>
                                </div>
                                <div class="welcome-card" onclick="loadPage('vocab_builder/index.html')">
                                    <div class="welcome-card-icon">üìö</div>
                                    <div class="welcome-card-title">T·ª´ v·ª±ng</div>
                                    <div class="welcome-card-desc">H·ªçc t·ª´ m·ªõi v·ªõi SRS</div>
                                </div>
                                <div class="welcome-card" onclick="loadPage('hanzi_writer_mvp/index.html')">
                                    <div class="welcome-card-icon">‚úçÔ∏è</div>
                                    <div class="welcome-card-title">Vi·∫øt ch·ªØ</div>
                                    <div class="welcome-card-desc">Luy·ªán vi·∫øt H√°n t·ª±</div>
                                </div>
                                <div class="welcome-card" onclick="loadPage('conversation/index.html')">
                                    <div class="welcome-card-icon">üí¨</div>
                                    <div class="welcome-card-title">H·ªôi tho·∫°i</div>
                                    <div class="welcome-card-desc">Luy·ªán n√≥i theo t√¨nh hu·ªëng</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Game Frame -->
                    <div class="game-frame-container" id="game-frame-container">
                        <div class="game-frame-wrapper">
                            <iframe class="game-frame" id="game-frame" src=""></iframe>
                        </div>
                    </div>
                    
                    <!-- Loading -->
                    <div class="loading-overlay" id="loading">
                        <div class="loading-spinner"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script>
        // ============ INTERNATIONALIZATION ============
        const i18n = {
            vi: {
                home: 'Trang ch·ªß',
                dailyChallenge: 'Th·ª≠ th√°ch h√¥m nay',
                writing: 'Vi·∫øt ch·ªØ',
                vocabulary: 'T·ª´ v·ª±ng',
                grammar: 'Ng·ªØ ph√°p',
                listening: 'Nghe & N√≥i',
                games: 'Mini Games',
                culture: 'VƒÉn h√≥a',
                hanziWriter: 'Hanzi Writer',
                strokeOrder: 'Stroke Order Quiz',
                charDecompose: 'Character Decomposition',
                radicalFusion: 'Radical Fusion',
                vocabBuilder: 'Vocabulary Builder',
                readingPractice: 'Reading Practice',
                measureWords: 'Measure Words',
                pinyinTyping: 'Pinyin Typing',
                ankiManager: 'Anki Manager',
                grammarDrills: 'Grammar Drills',
                sentenceBuilder: 'Sentence Builder',
                hskTest: 'HSK Test',
                toneTrainer: 'Tone Trainer',
                listeningQuiz: 'Listening Quiz',
                conversation: 'Conversation',
                faceMimic: 'Face Mimic',
                memoryGame: 'Memory Game',
                scrollytelling: 'Scrollytelling',
                chengyuGame: 'Chengyu Game',
                cultureQuiz: 'Culture Quiz',
                welcomeTitle: 'Â≠¶‰∏≠Êñá',
                welcomeSubtitle: 'Ch·ªçn m·ªôt ho·∫°t ƒë·ªông ƒë·ªÉ b·∫Øt ƒë·∫ßu h√†nh tr√¨nh',
                challenge: 'Th·ª≠ th√°ch',
                challengeDesc: 'Ho√†n th√†nh m·ª•c ti√™u h√¥m nay',
                vocab: 'T·ª´ v·ª±ng',
                vocabDesc: 'H·ªçc t·ª´ m·ªõi v·ªõi SRS',
                write: 'Vi·∫øt ch·ªØ',
                writeDesc: 'Luy·ªán vi·∫øt H√°n t·ª±',
                chat: 'H·ªôi tho·∫°i',
                chatDesc: 'Luy·ªán n√≥i theo t√¨nh hu·ªëng',
                days: 'ng√†y'
            },
            zh: {
                home: 'È¶ñÈ°µ',
                dailyChallenge: '‰ªäÊó•ÊåëÊàò',
                writing: 'ÂÜôÂ≠ó',
                vocabulary: 'ËØçÊ±á',
                grammar: 'ËØ≠Ê≥ï',
                listening: 'Âê¨ËØ¥',
                games: 'Â∞èÊ∏∏Êàè',
                culture: 'ÊñáÂåñ',
                hanziWriter: 'Ê±âÂ≠ó‰π¶ÂÜô',
                strokeOrder: 'Á¨îÈ°∫ÊµãÈ™å',
                charDecompose: 'Ê±âÂ≠óÂàÜËß£',
                radicalFusion: 'ÈÉ®È¶ñËûçÂêà',
                vocabBuilder: 'ËØçÊ±áÊûÑÂª∫',
                readingPractice: 'ÈòÖËØªÁªÉ‰π†',
                measureWords: 'ÈáèËØçÁªÉ‰π†',
                pinyinTyping: 'ÊãºÈü≥ÊâìÂ≠ó',
                ankiManager: 'AnkiÁÆ°ÁêÜ',
                grammarDrills: 'ËØ≠Ê≥ïÁªÉ‰π†',
                sentenceBuilder: 'ÈÄ†Âè•ÁªÉ‰π†',
                hskTest: 'HSKÊµãËØï',
                toneTrainer: 'Â£∞Ë∞ÉËÆ≠ÁªÉ',
                listeningQuiz: 'Âê¨ÂäõÊµãÈ™å',
                conversation: '‰ºöËØùÁªÉ‰π†',
                faceMimic: 'Âè£ÂûãÊ®°‰ªø',
                memoryGame: 'ËÆ∞ÂøÜÊ∏∏Êàè',
                scrollytelling: 'ÊïÖ‰∫ãÈòÖËØª',
                chengyuGame: 'ÊàêËØ≠Â≠¶‰π†',
                cultureQuiz: 'ÊñáÂåñÁü•ËØÜ',
                welcomeTitle: 'Â≠¶‰∏≠Êñá',
                welcomeSubtitle: 'ÈÄâÊã©‰∏Ä‰∏™Ê¥ªÂä®ÂºÄÂßãÂ≠¶‰π†‰πãÊóÖ',
                challenge: 'ÊåëÊàò',
                challengeDesc: 'ÂÆåÊàê‰ªäÂ§©ÁöÑÁõÆÊ†á',
                vocab: 'ËØçÊ±á',
                vocabDesc: 'Áî®SRSÂ≠¶‰π†Êñ∞ËØç',
                write: 'ÂÜôÂ≠ó',
                writeDesc: 'ÁªÉ‰π†ÂÜôÊ±âÂ≠ó',
                chat: '‰ºöËØù',
                chatDesc: 'ÊÉÖÊôØÂØπËØùÁªÉ‰π†',
                days: 'Â§©'
            },
            en: {
                home: 'Home',
                dailyChallenge: 'Daily Challenge',
                writing: 'Writing',
                vocabulary: 'Vocabulary',
                grammar: 'Grammar',
                listening: 'Listening & Speaking',
                games: 'Mini Games',
                culture: 'Culture',
                hanziWriter: 'Hanzi Writer',
                strokeOrder: 'Stroke Order Quiz',
                charDecompose: 'Character Decomposition',
                radicalFusion: 'Radical Fusion',
                vocabBuilder: 'Vocabulary Builder',
                readingPractice: 'Reading Practice',
                measureWords: 'Measure Words',
                pinyinTyping: 'Pinyin Typing',
                ankiManager: 'Anki Manager',
                grammarDrills: 'Grammar Drills',
                sentenceBuilder: 'Sentence Builder',
                hskTest: 'HSK Test',
                toneTrainer: 'Tone Trainer',
                listeningQuiz: 'Listening Quiz',
                conversation: 'Conversation',
                faceMimic: 'Face Mimic',
                memoryGame: 'Memory Game',
                scrollytelling: 'Scrollytelling',
                chengyuGame: 'Chengyu Game',
                cultureQuiz: 'Culture Quiz',
                welcomeTitle: 'Â≠¶‰∏≠Êñá',
                welcomeSubtitle: 'Choose an activity to start your journey',
                challenge: 'Challenge',
                challengeDesc: 'Complete today\'s goals',
                vocab: 'Vocabulary',
                vocabDesc: 'Learn new words with SRS',
                write: 'Writing',
                writeDesc: 'Practice writing Hanzi',
                chat: 'Conversation',
                chatDesc: 'Practice situational dialogues',
                days: 'days'
            }
        };
        
        let currentLang = localStorage.getItem('polybiz_lang') || 'vi';
        
        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('polybiz_lang', lang);
            
            // Update button states
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            
            // Update all translatable elements
            updateTranslations();
        }
        
        function t(key) {
            return i18n[currentLang][key] || i18n['en'][key] || key;
        }
        
        function updateTranslations() {
            // Navigation items
            document.querySelectorAll('[data-i18n]').forEach(el => {
                el.textContent = t(el.dataset.i18n);
            });
            
            // Welcome screen
            const welcomeTitle = document.querySelector('.welcome-title');
            const welcomeSubtitle = document.querySelector('.welcome-subtitle');
            if (welcomeTitle) welcomeTitle.textContent = t('welcomeTitle');
            if (welcomeSubtitle) welcomeSubtitle.textContent = t('welcomeSubtitle');
            
            // Welcome cards
            const cards = document.querySelectorAll('.welcome-card');
            if (cards[0]) {
                cards[0].querySelector('.welcome-card-title').textContent = t('challenge');
                cards[0].querySelector('.welcome-card-desc').textContent = t('challengeDesc');
            }
            if (cards[1]) {
                cards[1].querySelector('.welcome-card-title').textContent = t('vocab');
                cards[1].querySelector('.welcome-card-desc').textContent = t('vocabDesc');
            }
            if (cards[2]) {
                cards[2].querySelector('.welcome-card-title').textContent = t('write');
                cards[2].querySelector('.welcome-card-desc').textContent = t('writeDesc');
            }
            if (cards[3]) {
                cards[3].querySelector('.welcome-card-title').textContent = t('chat');
                cards[3].querySelector('.welcome-card-desc').textContent = t('chatDesc');
            }
            
            // Stats
            const streakBadge = document.querySelector('.stat-badge.streak');
            if (streakBadge) {
                const streak = document.getElementById('streak').textContent;
                streakBadge.innerHTML = `üî• <span id="streak">${streak}</span>`;
            }
        }
        
        // ============ PARTICLES ============
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }
        createParticles();
        
        // ============ 3D MOUSE EFFECT ============
        const stageContainer = document.getElementById('stage-container');
        const stageView = document.getElementById('stage-view');
        
        stageView.addEventListener('mousemove', (e) => {
            const rect = stageView.getBoundingClientRect();
            const x = (e.clientX - rect.left) / rect.width - 0.5;
            const y = (e.clientY - rect.top) / rect.height - 0.5;
            
            stageContainer.style.transform = `
                rotateY(${x * 5}deg)
                rotateX(${-y * 5}deg)
                translateZ(20px)
            `;
        });
        
        stageView.addEventListener('mouseleave', () => {
            stageContainer.style.transform = 'rotateY(0) rotateX(0) translateZ(0)';
        });
        
        // ============ NAVIGATION ============
        const navItems = document.querySelectorAll('.nav-item');
        const welcomeScreen = document.getElementById('welcome-screen');
        const gameFrameContainer = document.getElementById('game-frame-container');
        const gameFrame = document.getElementById('game-frame');
        const loading = document.getElementById('loading');
        const currentPageEl = document.getElementById('current-page');
        
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const page = item.dataset.page;
                if (page === 'home') {
                    showHome();
                } else {
                    loadPage(page);
                }
                
                navItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
            });
        });
        
        function showHome() {
            welcomeScreen.style.display = 'flex';
            gameFrameContainer.classList.remove('active');
            currentPageEl.textContent = 'Trang ch·ªß';
        }
        
        function loadPage(page) {
            loading.classList.add('active');
            welcomeScreen.style.display = 'none';
            
            // Extract name for breadcrumb
            const name = page.split('/')[0].replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            currentPageEl.textContent = name;
            
            // Update active nav
            navItems.forEach(item => {
                item.classList.toggle('active', item.dataset.page === page);
            });
            
            setTimeout(() => {
                gameFrame.src = page;
                gameFrameContainer.classList.add('active');
            }, 300);
            
            gameFrame.onload = () => {
                loading.classList.remove('active');
            };
        }
        
        function refreshGame() {
            if (gameFrame.src) {
                loading.classList.add('active');
                gameFrame.src = gameFrame.src;
            }
        }
        
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }
        
        // ============ MOBILE SIDEBAR ============
        function openSidebar() {
            document.getElementById('sidebar').classList.add('open');
            document.getElementById('sidebar-overlay').classList.add('show');
            document.body.style.overflow = 'hidden';
        }
        
        function closeSidebar() {
            document.getElementById('sidebar').classList.remove('open');
            document.getElementById('sidebar-overlay').classList.remove('show');
            document.body.style.overflow = '';
        }
        
        // Close sidebar when clicking nav item on mobile
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                if (window.innerWidth <= 900) {
                    closeSidebar();
                }
            });
        });
        
        // ============ LOAD STATS ============
        function loadStats() {
            try {
                const daily = JSON.parse(localStorage.getItem('polybiz_daily') || '{}');
                document.getElementById('streak').textContent = daily.streak || 0;
                document.getElementById('xp').textContent = daily.xp || 0;
            } catch(e) {}
        }
        loadStats();
        
        // Initialize language
        document.querySelector(`.lang-btn[data-lang="${currentLang}"]`)?.classList.add('active');
        document.querySelectorAll('.lang-btn').forEach(btn => {
            if (btn.dataset.lang !== currentLang) btn.classList.remove('active');
        });
        updateTranslations();
        
        // ============ SCROLL WHEEL 3D EFFECT ============
        // Only apply 3D effect on welcome screen, not when game is loaded
        let scrollZ = 0;
        stageView.addEventListener('wheel', (e) => {
            // Only apply 3D effect when on welcome screen
            if (welcomeScreen.style.display !== 'none' && !gameFrameContainer.classList.contains('active')) {
                scrollZ += e.deltaY * 0.1;
                scrollZ = Math.max(-100, Math.min(100, scrollZ));
                
                stageContainer.style.transform = `
                    translateZ(${scrollZ}px)
                    rotateX(${scrollZ * 0.05}deg)
                `;
            }
            // Don't prevent default - let iframe scroll naturally
        });
    </script>
</body>
</html>
